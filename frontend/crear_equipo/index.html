<!DOCTYPE html>
<html lang="en">
<head>
    <title>Dream Team</title>
</head>
<body>
    <form id="team-form">
        <label>Arquero:</label>
        <select name="arquero">
            <option value="">Seleccione Arquero</option>
        </select>
        <br>

        <label>Defensor 1:</label>
        <select name="defensor1">
            <option value="">Seleccione Defensor 1</option>
        </select>
        <br>

        <label>Defensor 2:</label>
        <select name="defensor2">
            <option value="">Seleccione Defensor 2</option>
        </select>
        <br>

        <label>Mediocampista:</label>
        <select name="mediocampista">
            <option value="">Seleccione Mediocampista</option>
        </select>
        <br>

        <label>Delantero:</label>
        <select name="delantero">
            <option value="">Seleccione Delantero</option>
        </select>
        <br>
    </form>
   <script>
    function response_received(response) {
        console.log('Response received:', response);
        return response.json();
    }

    function request_error(error) {
        console.error('Request failed:', error);
    }

    function fillForm(jugadores, position, defaultText) {
        const select = document.querySelector(`select[name="${position}"]`);
        select.innerHTML = '';

        const defaultOption = document.createElement("option");
        defaultOption.value = "";
        defaultOption.textContent = defaultText;
        select.append(defaultOption);

        jugadores.forEach(jugador => {
            const option = document.createElement("option");
            option.value = jugador.id;
            option.textContent = jugador.nombre;
            select.append(option);
        });
    }

    function parse_data(jugadores) {
        console.log('Jugadores:', jugadores);
        fillForm(jugadores.filter(j => j.posicion === "arq"), "arquero", "Seleccione Arquero");
        fillForm(jugadores.filter(j => j.posicion === "def"), "defensor1", "Seleccione Defensor 1");
        fillForm(jugadores.filter(j => j.posicion === "def"), "defensor2", "Seleccione Defensor 2");
        fillForm(jugadores.filter(j => j.posicion === "med"), "mediocampista", "Seleccione Mediocampista");
        fillForm(jugadores.filter(j => j.posicion === "del"), "delantero", "Seleccione Delantero");
    }

    fetch("http://localhost:5000/jugadores")
        .then(response_received)
        .then(parse_data)
        .catch(request_error);
</script>
</body>
</html>
